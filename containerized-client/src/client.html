<!DOCTYPE html>
<html lang="en">

<head>
    <link rel="icon" type="image/png" id=favIcon href="favicon.jpg" />
    <link rel="stylesheet" href="bootstrap-4.2.1-dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="style.css">

    <script src="jquery-3.3.1.js"></script>
    <script src="popper-1.14.6.js"></script>
    <script src="bootstrap-4.2.1-dist/js/bootstrap.js"></script>

    <script src="bahn.js"></script>
    <script src="script.js"></script>

    <title>SWTbahn Client</title>
</head>

<body style="margin: 20px">

    <div id="swtLogo">Client</div>
    <div id="user-info" class="header-info">Logged in as <b id="header-username">admin</b>. <button id="btn-logout" class="btn-outline-primary btn-sm">Logout</button></div>
    <div id="guest-info" class="header-info">You are currently using Guest Access. <button id="btb-open-login" class="btn-outline-primary btn-sm">Login</button></div>
    <hr />

    <h1>Configuration</h1>

    <label>Track Output:</label>
    <input type="text" id=trackOutput value="master" />
    <button id=configButton>Configure</button>
    <span id=configResponse></span>
    <br />
    <br />

    <button id=pingButton>Ping SWTbahn Server</button>
    <span id=pingResponse></span>
    <br />

    <label for="select-platform">Platform</label>
    <select id="select-platform">
    </select>
    <br />

    <button id=startupButton>Startup</button>
    <span id=startupResponse></span>
    <br />

    <button id=shutdownButton>Shutdown</button>
    <span id=shutdownResponse></span>
    <br />
    <br />

    <span id=sessionGrabId>Session ID: 0, Grab ID: -1</span>
    <br />
    <br />


    <h1>Train Driver</h1>

    <label>Train:</label>
    <select id=grabTrainId>
        <option>cargo_db</option>
        <option>cargo_bayern</option>
        <option>cargo_green</option>
        <option>regional_odeg</option>
        <option>regional_brengdirect</option>
    </select>
    <label>Engine:</label>
    <select id=grabEngine>
        <option>libtrain_engine_default (unremovable)</option>
        <option>libtrain_engine_linear (unremovable)</option>
    </select>
    <button id=grabTrainButton>Grab</button>
    <button id=releaseTrainButton>Release</button>
    <span id=grabTrainResponse></span>
    <br />

    <label>DCC Speed:</label>
    <input type="text" id=dccSpeed value="10" />
    <label>Forward Direction:</label>
    <input type="checkbox" id=direction checked />
    <button id=driveTrainButton>Drive</button>
    <button id=stopTrainButton>Stop</button>
    <span id=driveTrainResponse></span>
    <br />

    <label>Route:</label>
    <input type="text" id=signalIdFrom value="signal" />
    <label>to</label>
    <input type="text" id=signalIdTo value="signal" />
    <button id=requestRouteButton>Request</button>
    <button id=driveRouteButton>Drive Route</button>
    <span id=routeResponse></span>
    <br />
    <br />
    
    
    <h1>Custom Engines</h1>
    <label>SCCharts File (*.sctx):</label>
    <input type="file" id=selectEngineFile accept=".sctx" />
    <button id=uploadEngineButton>Upload</button>
    <span id=uploadResponse></span>
    <br />
    
    <label>Available Engines:</label>
    <select id=availableEngines>
        <option>libtrain_engine_default (unremovable)</option>
        <option>libtrain_engine_linear (unremovable)</option>
    </select>
    <button id=refreshEnginesButton>Refresh</button>
    <button id=removeEngineButton>Remove</button>
    <span id=refreshRemoveResponse></span>
    <br />
    <br />
    

    <h1>Controller</h1>

    <label>Release Route:</label>
    <input type="text" id=routeId value="" />
    <button id=releaseRouteButton>Release</button>
    <span id=releaseRouteResponse></span>
    <br />

    <label>Point:</label>
    <select id=pointId>
        <option>point1</option>
        <option>point2</option>
        <option>point3</option>
        <option>point4</option>
        <option>point5</option>
        <option>point6</option>
        <option>point7</option>
        <option>point8</option>
        <option>point9</option>
        <option>point10</option>
        <option>point11</option>
        <option>point12</option>
    </select>
    <label>Position:</label>
    <select id=pointPosition>
        <option>normal</option>
        <option>reverse</option>
    </select>
    <button id=setPointButton>Set</button>
    <span id=setPointResponse></span>
    <br />

    <label>Signal:</label>
    <select id=signalId>
        <option>signal1</option>
        <option>signal2</option>
        <option>signal3</option>
        <option>signal4</option>
        <option>signal5</option>
        <option>signal6</option>
        <option>signal7</option>
        <option>signal8</option>
        <option>signal9</option>
        <option>signal10</option>
        <option>signal11</option>
        <option>signal12</option>
        <option>signal13</option>
        <option>signal14</option>
        <option>signal15</option>
        <option>signal16</option>
        <option>signal17</option>
        <option>signal18</option>
        <option>signal19</option>
        <option>platformlights</option>
    </select>
    <label>Aspect:</label>
    <select id=signalAspect>
        <option>green</option>
        <option>yellow</option>
        <option>red</option>
    </select>
    <button id=setSignalButton>Set</button>
    <span id=setSignalResponse></span>

    <!-- Login Modal -->
    <div class="modal fade" id="loginModal" tabindex="-1" role="dialog" aria-labelledby="loginModalTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="loginModalTitle">Login</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="alert alert-primary" role="alert">
                        Please log in to use SWTBahn. You can also use Guest Access, but not all functions will be available in that case.
                    </div>
                    <div class="alert alert-danger" role="alert" style="display: none;" id="loginError">
                        Invalid credentials.
                    </div>

                    <form id="loginForm">
                        <div class="form-group">
                            <label for="loginUsername">Username</label>
                            <input type="text" class="form-control" id="loginUsername" placeholder="Username">
                        </div>
                        <div class="form-group">
                            <label for="loginPassword">Password</label>
                            <input type="password" class="form-control" id="loginPassword" placeholder="Password">
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Guest Access</button>
                    <button type="button" class="btn btn-primary" id="loginButton">Login</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Unauthorized Modal -->
    <div class="modal fade" id="unauthorizedModal" tabindex="-1" role="dialog" aria-labelledby="unauthorizedModalTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="unauthorizedModalTitle">Unauthorized</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    You are not authorized to perform this action.
                    If you are using guest access, please log in and try again.
                    If you are logged in, you do not have the role that may perform this action. Please contact your supervisor to resolve this issue.
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-dismiss="modal">OK</button>
                </div>
            </div>
        </div>
    </div>
</body>

</html>
